---
title: "Expand your coding skills to share your science"
subtitle:  "A workshop for beginner coders in disciplines that collect data"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Details
Nov 30, 2-3pm

CSF 1302

Bring your laptop

## Please register {-}
To help with planning, please register [here](https://docs.google.com/forms/d/e/1FAIpQLSd3P4PP5U88Hf66cOuTeGg8tpe_Rhja64lLNyeRJYpo-wmtpw/viewform?usp=sf_link). **There will be PIZZA!**

If you have questions or need help, please email ahurford-at-mun-dot-ca. If you would like to participate, but don't have a laptop - we can help! (if you email and let me know) 

## Workshop description
Thanks to everyone who has helped further our quantitative training objectives in the Biology department at MUNL. For students, staff, and faculty who would like _more_, this workshop is a fun way to end the semester.

The workshop will foster community in departments that collect data for advancement of quantitative training. Interested experts are welcome to attend, but the workshop is designed with beginners in mind.

In the workshop you will learn how to use `R` to _Share your Science_. We will help, and experience in `R` is not required. The schedule is:

PART I. `Rmarkdown` (so we can integrate our code and write-up, write equations, etc)

PART II. `bookdown` (stitching our R markdown pages together into an ebook)

You will also learn how to host these files of the internet.

This is a hands-on workshop: _you_ will be doing the work!

## Get prepared (To do before the workshop)

All software, packages, and workshop resources are free.

1. You need `R` and `RStudio`. If you need to install these, see [here](https://ahurford.github.io/quant-guide-all-courses/install.html)
1. To participate in I., you need to install the package `rmarkdown`. To output to a .pdf you need to install the package `tinytex` (not necessary if you already have TeX installed or are fine to output to `.html` or `.docx` only)
1. To participate in II. you need to install the package `bookdown`.
1. To host your ebook on the internet you need a [Github](https://github.com/) account. You may wish to make one ahead of time. You can make a website (but not an ebook) with an RStudio account. Both accounts are free.
1. For ease in data manipulation and for making beautiful plots you might install the packages `dplyr` and `ggplot2`. Also install any dependencies and if asked about sources that require compilation answer `n`. To install packages see instructions [here](https://ahurford.github.io/quant-guide-all-courses/rstudio.html#filesplotspackageshelpviewer-pane)

## Workshop

### PART I. R markdown

```{r, include=FALSE,eval=TRUE}
data <- read.csv('https://raw.githubusercontent.com/ahurford/biol-4605-data/main/data/corn.csv', fill=TRUE)
x<-mean(data$Pcorn)
```

<div class="alert alert-info">
**Why use R markdown?**

- Integrate code and write-up to avoid mistakes moving between `.R` (or other software) for analysis and `.docx` for write-up.

- It is easier to find all your work when everything is in one file (or linked to from one file).

- Run code in the background of your write-up so that if something changes the write-up automatically updates in all the relevant places. The reduces the chances of errors in your write-up.

- Publish your work as a website. This facilitates hyper-linking, you can update your work at any time, avoiding emailing your work keeps email storage free, and your work can be easily shared (i.e., in conversation I might say 'that analysis is linked off my faculty website').

- Include math symbols quickly because your hands don't leave the keyboard to make selections from drop-down menus.

- If your analysis is time-consuming you might not want the calculations in your write-up, slowing the compilation of your write-up. In this case you might have a separate `.R` analysis file that outputs your results as a `.csv` or plot. You can read these in automatically to your write-up by specifying the path to the `.csv` or plot.

</div>

1. In `R Studio`, select `File > New Project... > R Markdown`. Give the file a name, etc.

2. The default `.Rmd` opens already with some code to help you. With the default `.Rmd` opened, there should be a `Knit` button at the top and center of the Editor pane. Click the `Knit` button to knit to `.pdf`, `.html`, or `.docx` output. Alternatively, do `Cmd/Ctrl + Shift + K`.


```{r, echo=FALSE, out.width = '50%', fig.align='center'}
knitr::include_graphics("figures/Knit.png")
```

_(If this did not work, perhaps you have not installed the rmarkdown or tinytex packages)_

3. Beside the `Knit` button is an arrow. You have the option to knit to `.pdf`, `.html`, or `.docx` output. Try producing other outputs.

_(For me, producing a .docx opened Skype (clearly a bug). This was fixed by using Finder (on my Mac) to find the .docx file that I made, and selecting Open With > Microsoft Word)_

4. Below are some things to try. Choose the ones that interest you most. Type the code, then `Knit` to see what happens.

- Include variables in-text by enclosing in `$x$`, i.e. this renders as $x$, which is italicized to indicate in your writing that $x$ is a variable rather than a letter.

- [Load data](https://ahurford.github.io/quant-guide-all-courses/data-entry.html#loading-or-importing-data) using R commands. _(If you want to do this quickly copy and paste the command at the end of this section)_

- [Hide the code](https://bookdown.org/yihui/rmarkdown/r-code.html) that loads the data in the output. i.e., read about the options for r code chunks: `echo`, `include`, `message`, `warning`, `eval`, and `results`. Print the data in your output. Show both the code and the output. Try it all!

- Show only your code print out. Can you do this?
```{r, results=T, echo=FALSE}
head(data)
```
- [Make a plot of your data](https://bookdown.org/yihui/rmarkdown/r-code.html#figures), but hide the commands that produce the plot. Make a figure caption.

- Include code in-text as `` `r "\u0060r x \u0060"` ``. This renders as `r x` because in a hidden coding block I loaded data and assigned `x<-mean(data$Pcorn)`. Therefore, the reported value of $x$ = `r x` is the mean phosphorous in the soil for the data I loaded in the background. If the data change, the mean reported in this document will automatically change too.

- Make [headings, subheadings](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#block-level-elements), [bold font](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#inline-formatting), etc.

- Make a [hyperlink](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#inline-formatting).

- Include a [figure](https://bookdown.org/yihui/rmarkdown/r-code.html#figures) that is a `.png` or other format. _(I find using knitr::include_graphics() within a code chunk best.)_

- Use latex commands to include in-text equations, i.e., `$y = \beta_0 + \beta_1 x$` renders as $y = \beta_0 + \beta_1 x$; `$\frac{dy}{dt} = e^x$` renders as $\frac{dy}{dt} = e^x$. _(The website [Detexify](https://detexify.kirelabs.org/classify.html) is fun for identifying latex commands for different symbols (Some advanced symbols may require packages that your haven't installed and therfore won't work))_.

- Try some [more complicated](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#math-expressions) Latex.

- Try to publish your `.html`. Knit to `.html`, click `Publish` and select `RPubs` (the free option).

```{r}
data <- read.csv('https://raw.githubusercontent.com/ahurford/biol-4605-data/main/data/corn.csv', fill=TRUE)
```

- If you would like a more structured introduction to R Markdown you can read [R Markdown: the definitive guide](https://bookdown.org/yihui/rmarkdown/).

- This [R markdown cheat sheet](https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf)  is helpful.

- Some more advanced skills you might learn are making alert boxes, or changing some of the options in the [YAML](https://bookdown.org/yihui/rmarkdown/html-document.html). The alert boxes in this document are made as `div class="alert alert-info"` between `< >`, then the text, and closed with `/div` between `< >`.

- My experience making tables in `.Rmd` has not been good. Usually, I make the table in `.docx`, print to `.pdf`, take a screenshot and import the `.png` to `.Rmd` or `.tex`.


### PART II. Bookdown

<div class="alert alert-info">
**Why use bookdown?**

- The bookdown package assembles individual `.Rmd` into pages of an ebook and makes a table of contents.

- Making an ebook allows you to have many `.Rmd`, organized, and to just use one url for hosting.

</div>

- Read about `bookdown` [here](https://bookdown.org/yihui/rmarkdown/books.html).

- Get started making your ebook by following [these](https://bookdown.org/yihui/rmarkdown/bookdown-start.html) instructions. To summarize the link: select `File > New Project...`, `Create new directory > book project using bookdown` (scroll down to find this option). This may be new: you have created a new _project_ rather than a new _file_. This is indicated in the top right hand corner of `R Studio`. Later, if you open your ebook, you need to open the _project_, not just the _files_ (or you will not be able to build your book).

```{r, echo=FALSE, out.width = '20%', fig.align='center'}
knitr::include_graphics("figures/book project.png")
```

- Try to Build the example book. You need to find a hammer next to `Build` available from the `Build` tab (see below) on a pane on the top righthand side. You might need to resize panes for it to appear.

```{r, echo=FALSE, out.width = '35%', fig.align='center'}
knitr::include_graphics("figures/Build.png")
```

_(If there is no Build tab, perhaps you do not have a Project open)_

- The ebook compiles `index.Rmd` as the first page, and then you number the `.Rmd`  appropriately. Look at the `Files` tab for the example book to see how this is done:

```{r, echo=FALSE, out.width = '25%', fig.align='center'}
knitr::include_graphics("figures/Files.png")
```

- What you learned about `rmarkdown` in Part I will now help you with customizing the content of your ebook. When I don't know how to do something, I perform an internet search. Often my search refers me to the book [bookdown: Authoring Books and Technical Documents with R Markdown](https://bookdown.org/yihui/bookdown/).

- I host my books using GitHub Pages. In GitHub make a new repository by clicking the green `new` button on [GitHub](https://github.com/) when you are signed in. The repository must be public.


```{r, echo=FALSE, out.width = '30%', fig.align='center'}
knitr::include_graphics("figures/new.png")
```

- Choose <span style="color: blue;">uploading an existing file</span>. Move everything in your folder for your ebook over to the github repository.

```{r, echo=FALSE, out.width = '35%', fig.align='center'}
knitr::include_graphics("figures/upload.png")
```

- Once the upload is complete, commit the changes.

```{r, echo=FALSE, out.width = '25%', fig.align='center'}
knitr::include_graphics("figures/commit.png")
```

- From the top menu, on the far right, select `Settings`.

```{r, echo=FALSE, out.width = '100%', fig.align='center'}
knitr::include_graphics("figures/settings.png")
```

From the left menu, select `Pages`.

```{r, echo=FALSE, out.width = '25%', fig.align='center'}
knitr::include_graphics("figures/pages.png")
```

- Under the **Branch** heading, select `main` and click `Save`.

```{r, echo=FALSE, out.width = '25%', fig.align='center'}
knitr::include_graphics("figures/branch.png")
```

- After less than 5 minutes, if you have succeeded on the `Pages` tab it will report your url (see below).

```{r, echo=FALSE, out.width = '50%', fig.align='center'}
knitr::include_graphics("figures/pages2.png")
```

- On your main repository page, your website will be listed as active.

```{r, echo=FALSE, out.width = '20%', fig.align='center'}
knitr::include_graphics("figures/main.png")
```

If you plan to manage your online ebook this way, I recommend beginning by using [GitHub Desktop](https://desktop.github.com/), which makes it easy for beginners in GitHub to update their websites.

## Feedback

Leave feedback on the workshop [here](https://docs.google.com/forms/d/e/1FAIpQLSd8hWxS84LuUnQwPZh0N3S1DOiAF06iYb8809AvAWCzFr5QCw/viewform?usp=sf_link).

## Share your work!

Did you make a website that you're proud of? Leave the url on the [feedback form](https://docs.google.com/forms/d/e/1FAIpQLSd8hWxS84LuUnQwPZh0N3S1DOiAF06iYb8809AvAWCzFr5QCw/viewform?usp=sf_link) and I will share it below!

- Amy's stuff: [Faculty website](https://ahurford.github.io/website/#dr.-amy-hurford) (in bookdown), [COVID-19 modelling](https://rpubs.com/ahurford/883365) (using Rpubs)

